(function(e){e.wpProQuizFront=function(i,t){function o(){var e=0,i=-1,t=0,o=!1;this.questionStart=function(t){-1!=i&&this.questionStop(),i=t,e=+new Date},this.questionStop=function(){-1!=i&&(f[i].time+=Math.round((new Date-e)/1e3),i=-1)},this.startQuiz=function(){o&&this.stopQuiz(),t=+new Date,o=!0},this.stopQuiz=function(){o&&(quizEndTimer=+new Date,f.comp.quizTime+=Math.round((quizEndTimer-t)/1e3),f.comp.quizEndTimestamp=quizEndTimer,f.comp.quizStartTimestamp=t,o=!1)},this.init=function(){}}function n(i,t,o,n){if("single"==i.type||"multiple"==i.type)n.children().each(function(i){var n=e(this),s=n.attr("data-pos");if(null!=t[s]){var r=t[s];1==r&&(e(".wpProQuiz_questionInput",n).prop("checked","checked"),c.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}}))}});else if("free_answer"==i.type)n.children().each(function(i){e(this);e(".wpProQuiz_questionInput",this).val(t)}),c.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}});else if("sort_answer"==i.type)jQuery.each(t,function(i,t){var o=e('li.wpProQuiz_questionListItem[data-pos="'+t+'"]',n),s=e("div.wpProQuiz_sortable",o);e(s).text();jQuery(n).append(o)}),c.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}});else if("matrix_sort_answer"==i.type)jQuery.each(t,function(i,t){var s=e('.wpProQuiz_matrixSortString .wpProQuiz_sortStringList li[data-pos="'+i+'"]',o),r=e('li.wpProQuiz_questionListItem[data-pos="'+t+'"] ul.wpProQuiz_maxtrixSortCriterion',n);jQuery(s).appendTo(r)}),c.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}});else if("cloze_answer"==i.type)jQuery('span.wpProQuiz_cloze input[type="text"]',n).each(function(i){void 0!==t[i]&&e(this).val(t[i])}),c.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}});else if("assessment_answer"==i.type)e('input.wpProQuiz_questionInput[value="'+t+'"]',n).attr("checked","checked"),c.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}});else if("essay"==i.type)if(n.find("#uploadEssayFile_"+i.id).length){var r=n.find("#uploadEssayFile_"+i.id);e(r).val(t),e("<p>"+s(t)+"</p>").insertAfter(r),c.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}})}else n.find(".wpProQuiz_questionEssay").length&&(n.find(".wpProQuiz_questionEssay").html(t),c.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}}))}function s(e){return null!=e?e.split("/").reverse()[0]:""}var r,a,u,d,c=e(i),p=t,l={},h=this,f=new Object,w=new Object,m=0,_=null,v=[],Q="",z=!1,P=1,g=0,q=null,y="",x="",k={randomAnswer:0,randomQuestion:0,disabledAnswerMark:0,checkBeforeStart:0,preview:0,cors:0,isAddAutomatic:0,quizSummeryHide:0,skipButton:0,reviewQustion:0,autoStart:0,forcingQuestionSolve:0,hideQuestionPositionOverview:0,formActivated:0,maxShowQuestion:0,sortCategories:0},S={isQuizStart:0,isLocked:0,loadLock:0,isPrerequisite:0,isUserStartLocked:0},b={check:'input[name="check"]',next:'input[name="next"]',questionList:".wpProQuiz_questionList",skip:'input[name="skip"]',singlePageLeft:'input[name="wpProQuiz_pageLeft"]',singlePageRight:'input[name="wpProQuiz_pageRight"]'},I={back:c.find('input[name="back"]'),next:c.find(b.next),quiz:c.find(".wpProQuiz_quiz"),questionList:c.find(".wpProQuiz_list"),results:c.find(".wpProQuiz_results"),sending:c.find(".wpProQuiz_sending"),quizStartPage:c.find(".wpProQuiz_text"),timelimit:c.find(".wpProQuiz_time_limit"),toplistShowInButton:c.find(".wpProQuiz_toplistShowInButton"),listItems:e()},T={token:"",isUser:0},L={START:0,END:1},C=(r=p.timelimit,a=0,u={},d="ldadv-time-limit-"+p.user_id+"-"+p.quizId,u.stop=function(){r&&(e.removeCookie(d),window.clearInterval(a),I.timelimit.hide())},u.start=function(){if(r){e.cookie.raw=!0;var i=1e3*r,t=e.cookie(d),o=t||r,n=1e3*o,s=I.timelimit.find("span").text(h.methode.parseTime(o)),c=I.timelimit.find(".wpProQuiz_progress");I.timelimit.show();var p=+new Date;a=window.setInterval(function(){var o=+new Date-p,r=n-o;o>=500&&(t=r/1e3,s.text(h.methode.parseTime(Math.ceil(t))),e.cookie(d,t)),c.css("width",r/i*100+"%"),r<=0&&(u.stop(),h.methode.finishQuiz(!0))},16)}},u),j=new function(){function i(e){}function t(e){var i="",t=m[e];t.solved?i="wpProQuiz_reviewQuestionSolved":t.review&&(i="wpProQuiz_reviewQuestionReview"),u.eq(e).removeClass("wpProQuiz_reviewQuestionSolved"),u.eq(e).removeClass("wpProQuiz_reviewQuestionReview"),""!=i&&u.eq(e).addClass(i)}function o(e){e.preventDefault();var i=e.pageY-p;i<0&&(i=0),i>d&&(i=d);var t=l*i;a.attr("style","margin-top: "+-t+"px !important"),r.css({top:i})}function n(i){i.preventDefault(),e(document).unbind(".scrollEvent")}var s=[],r=[],a=[],u=[],d=0,p=0,l=0,f=0,w=0,m=[];this.init=function(){s=c.find(".wpProQuiz_reviewQuestion"),r=s.find("div"),a=s.find("ol"),u=a.children(),r.mousedown(function(i){i.preventDefault(),i.stopPropagation(),p=i.pageY-r.offset().top+f,e(document).bind("mouseup.scrollEvent",n),e(document).bind("mousemove.scrollEvent",o)}),u.click(function(i){h.methode.showQuestion(e(this).index())}),c.bind("questionSolved",function(e){m[e.values.index].solved=e.values.solved,t(e.values.index)}),c.bind("changeQuestion",function(e){if("undefined"!=e.values.item[0]){e.values.item[0];h.methode.setupMatrixSortHeights()}u.removeClass("wpProQuiz_reviewQuestionTarget"),u.eq(e.values.index).addClass("wpProQuiz_reviewQuestionTarget"),i(e.values.index)}),c.bind("reviewQuestion",function(e){m[e.values.index].review=!m[e.values.index].review,t(e.values.index)})},this.show=function(e){if(k.reviewQustion&&s.parent().show(),c.find(".wpProQuiz_reviewDiv .wpProQuiz_button2").show(),!e){a.attr("style","margin-top: 0px !important"),r.css({top:0});var i=a.outerHeight(),t=s.height();d=t-r.height(),p=0,w=i-t,l=w/d,this.reset(),i>100&&r.show(),f=r.offset().top}},this.hide=function(){s.parent().hide()},this.toggle=function(){if(k.reviewQustion){s.parent().toggle(),u.removeClass("wpProQuiz_reviewQuestionTarget"),c.find(".wpProQuiz_reviewDiv .wpProQuiz_button2").hide(),a.attr("style","margin-top: 0px !important"),r.css({top:0});var e=a.outerHeight(),i=s.height();d=i-r.height(),p=0,w=e-i,l=w/d,e>100&&r.show(),f=r.offset().top}},this.reset=function(){for(var e=0,i=u.length;e<i;e++)m[e]={};u.removeClass("wpProQuiz_reviewQuestionTarget"),u.removeClass("wpProQuiz_reviewQuestionSolved"),u.removeClass("wpProQuiz_reviewQuestionReview")}},A=new o,E=function(i,t,o,n,s){null==s&&(s=!0);var r={},a={singleMulti:function(){var i=n.find(".wpProQuiz_questionInput");1==s&&n.find(".wpProQuiz_questionInput").attr("disabled","disabled"),jQuery(".wpProQuiz_questionListItem",n).each(function(t){var o=e(this),n=o.attr("data-pos");void 0!==n&&(r[n]=i.eq(t).is(":checked"))})},sort_answer:function(){var i=n.children();i.each(function(i,t){var o=e(this);r[i]=o.attr("data-pos")}),1==s&&n.sortable("destroy")},matrix_sort_answer:function(){var i=n.children();new Array;statistcAnswerData={0:-1},i.each(function(){var i=e(this),t=i.attr("data-pos"),o=i.find(".wpProQuiz_maxtrixSortCriterion"),n=o.children();n.length&&(statistcAnswerData[n.attr("data-pos")]=t),r=statistcAnswerData}),1==s&&o.find(".wpProQuiz_sortStringList, .wpProQuiz_maxtrixSortCriterion").sortable("destroy")},free_answer:function(){var e=n.children(),i=e.find(".wpProQuiz_questionInput").val();1==s&&e.find(".wpProQuiz_questionInput").attr("disabled","disabled"),r=i},cloze_answer:function(){r={},n.find(".wpProQuiz_cloze").each(function(i,t){var o=e(this),n=o.children(),a=n.eq(0),u=(n.eq(1),h.methode.cleanupCurlyQuotes(a.val()));r[i]=u,1==s&&a.attr("disabled","disabled")})},assessment_answer:function(){correct=!0;var i=n.find(".wpProQuiz_questionInput");1==s&&n.find(".wpProQuiz_questionInput").attr("disabled","disabled");var t=0;i.filter(":checked").each(function(){t+=parseInt(e(this).val())}),r=t},essay:function(){var e=o.find("ul.wpProQuiz_questionList").data("question_id");1==s&&n.find(".wpProQuiz_questionEssay").attr("disabled","disabled");var i=n.find(".wpProQuiz_questionEssay").val(),t=n.find("#uploadEssayFile_"+e).val();void 0!==i&&(r=i),void 0!==t&&(r=t)}};return a[i](),{response:r}},R=new function(){var i={isEmpty:function(i){return i=e.trim(i),!i||0===i.length}},t={TEXT:0,TEXTAREA:1,NUMBER:2,CHECKBOX:3,EMAIL:4,YES_NO:5,DATE:6,SELECT:7,RADIO:8};this.checkForm=function(){var o=!0;return c.find(".wpProQuiz_forms input, .wpProQuiz_forms textarea, .wpProQuiz_forms .wpProQuiz_formFields, .wpProQuiz_forms select").each(function(){var n=e(this),s=1==n.data("required"),r=n.data("type"),a=!0,u=e.trim(n.val());switch(r){case t.TEXT:case t.TEXTAREA:case t.SELECT:s&&(a=!i.isEmpty(u));break;case t.NUMBER:!s&&i.isEmpty(u)||(a=!i.isEmpty(u)&&!isNaN(u));break;case t.EMAIL:!s&&i.isEmpty(u)||(a=!i.isEmpty(u)&&new RegExp(/^[a-zA-Z0-9.!#$%&â€™*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/).test(u));break;case t.CHECKBOX:s&&(a=n.is(":checked"));break;case t.YES_NO:case t.RADIO:s&&(a=void 0!==n.find('input[type="radio"]:checked').val());break;case t.DATE:var d=0,c=0;n.find("select").each(function(){d++,c+=i.isEmpty(e(this).val())?0:1}),(s||c>0)&&(a=d==c)}a?n.siblings(".wpProQuiz_invalidate").hide():(o=!1,n.siblings(".wpProQuiz_invalidate").show())}),o},this.getFormData=function(){var i={};return c.find(".wpProQuiz_forms input, .wpProQuiz_forms textarea, .wpProQuiz_forms .wpProQuiz_formFields, .wpProQuiz_forms select").each(function(){var o=e(this),n=o.data("form_id"),s=o.data("type");switch(s){case t.TEXT:case t.TEXTAREA:case t.SELECT:case t.NUMBER:case t.EMAIL:i[n]=o.val();break;case t.CHECKBOX:i[n]=o.is(":checked")?1:0;break;case t.YES_NO:case t.RADIO:i[n]=o.find('input[type="radio"]:checked').val();break;case t.DATE:i[n]={day:o.find('select[name="wpProQuiz_field_'+n+'_day"]').val(),month:o.find('select[name="wpProQuiz_field_'+n+'_month"]').val(),year:o.find('select[name="wpProQuiz_field_'+n+'_year"]').val()}}}),i}},D=function(i){c.find(".wpProQuiz_questionList").each(function(){var t=e(this),o=t.data("question_id"),n=t.data("type"),s={};if("single"==n||"multiple"==n)t.find(".wpProQuiz_questionListItem").each(function(){s[e(this).attr("data-pos")]=+e(this).find(".wpProQuiz_questionInput").is(":checked")});else if("free_answer"==n)s[0]=t.find(".wpProQuiz_questionInput").val();else{if("sort_answer"==n)return!0;if("matrix_sort_answer"==n)return!0;if("cloze_answer"==n){var r=0;t.find(".wpProQuiz_cloze input").each(function(){s[r++]=e(this).val()})}else if("assessment_answer"==n)s[0]="",t.find(".wpProQuiz_questionInput:checked").each(function(){s[e(this).data("index")]=e(this).val()});else if("essay"==n)return}i[o].data=s})};h.methode={parseBitOptions:function(){if(p.bo){k.randomAnswer=1&p.bo,k.randomQuestion=2&p.bo,k.disabledAnswerMark=4&p.bo,k.checkBeforeStart=8&p.bo,k.preview=16&p.bo,k.isAddAutomatic=64&p.bo,k.reviewQustion=128&p.bo,k.quizSummeryHide=256&p.bo,k.skipButton=512&p.bo,k.autoStart=1024&p.bo,k.forcingQuestionSolve=2048&p.bo,k.hideQuestionPositionOverview=4096&p.bo,k.formActivated=8192&p.bo,k.maxShowQuestion=16384&p.bo,k.sortCategories=32768&p.bo;var e=32&p.bo;e&&null!=jQuery.support&&null!=jQuery.support.cors&&0==jQuery.support.cors&&(k.cors=e)}},setClozeStyle:function(){c.find(".wpProQuiz_cloze input").each(function(){for(var i=e(this),t="",o=i.data("wordlen"),n=0;n<o;n++)t+="w";var s=e(document.createElement("span")).css("visibility","hidden").text(t).appendTo(e("body")),r=s.width();s.remove(),i.width(r+5)})},parseTime:function(e){var i=parseInt(e%60),t=parseInt(e/60%60),o=parseInt(e/3600%24);return i=(i>9?"":"0")+i,t=(t>9?"":"0")+t,o=(o>9?"":"0")+o,o+":"+t+":"+i},cleanupCurlyQuotes:function(i){return i=i.replace(/\u2018/,"'"),i=i.replace(/\u2019/,"'"),i=i.replace(/\u201C/,'"'),i=i.replace(/\u201D/,'"'),e.trim(i)},resetMatrix:function(i){i.each(function(){var i=e(this),t=i.find(".wpProQuiz_sortStringList");i.find(".wpProQuiz_sortStringItem").each(function(){t.append(e(this))})})},marker:function(e,i){k.disabledAnswerMark||(!0===i?e.addClass("wpProQuiz_answerCorrect"):!1===i?e.addClass("wpProQuiz_answerIncorrect"):e.addClass(i))},startQuiz:function(i){if(S.loadLock)S.isQuizStart=1;else{if(S.isQuizStart=0,S.isLocked)return I.quizStartPage.hide(),void c.find(".wpProQuiz_lock").show();if(S.isPrerequisite)return I.quizStartPage.hide(),void c.find(".wpProQuiz_prerequisite").show();if(S.isUserStartLocked)return I.quizStartPage.hide(),void c.find(".wpProQuiz_startOnlyRegisteredUser").show();if(k.maxShowQuestion&&!i){if(p.formPos==L.START&&!R.checkForm())return;return I.quizStartPage.hide(),c.find(".wpProQuiz_loadQuiz").show(),void h.methode.loadQuizDataAjax(!0)}if(!k.formActivated||p.formPos!=L.START||R.checkForm()){switch(h.methode.loadQuizData(),k.randomQuestion&&h.methode.random(I.questionList),k.randomAnswer&&h.methode.random(c.find(b.questionList)),k.sortCategories&&h.methode.sortCategories(),h.methode.random(c.find(".wpProQuiz_sortStringList")),h.methode.random(c.find('.wpProQuiz_questionList[data-type="sort_answer"]')),c.find(".wpProQuiz_listItem").each(function(i,t){var o=e(this);o.find(".wpProQuiz_question_page span:eq(0)").text(i+1),o.find("> h5 span").text(i+1),o.find(".wpProQuiz_questionListItem").each(function(i,t){e(this).find("> span:not(.wpProQuiz_cloze)").text(i+1+". ")})}),I.next=c.find(b.next),p.mode){case 3:c.find('input[name="checkSingle"]').show();break;case 2:c.find(b.check).show(),!k.skipButton&&k.reviewQustion&&c.find(b.skip).show();break;case 1:c.find('input[name="back"]').slice(1).show();case 0:I.next.show()}(k.hideQuestionPositionOverview||3==p.mode)&&c.find(".wpProQuiz_question_page").hide();var o=I.next.last();Q=o.val(),o.val(p.lbn);var n=I.questionList.children();if(I.listItems=c.find(".wpProQuiz_list > li"),3==p.mode)h.methode.showSinglePage(0);else{_=n.eq(0).show();var s=_.find(b.questionList).data("question_id");A.questionStart(s)}A.startQuiz(),c.find(".wpProQuiz_sortable").parents("ul").sortable({update:function(i,t){var o=e(this).parents(".wpProQuiz_listItem");c.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}})}}).disableSelection(),c.find(".wpProQuiz_sortStringList, .wpProQuiz_maxtrixSortCriterion").sortable({connectWith:".wpProQuiz_maxtrixSortCriterion:not(:has(li)), .wpProQuiz_sortStringList",placeholder:"wpProQuiz_placehold",update:function(i,t){var o=e(this).parents(".wpProQuiz_listItem");c.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}})}}).disableSelection(),v=[],C.start(),m=+new Date,f={comp:{points:0,correctQuestions:0,quizTime:0}},c.find(".wpProQuiz_questionList").each(function(){var i=e(this).data("question_id");f[i]={time:0}}),w={},e.each(t.catPoints,function(e,i){w[e]=0}),I.quizStartPage.hide(),c.find(".wpProQuiz_loadQuiz").hide(),I.quiz.show(),j.show(),h.methode.CookieInit(),h.methode.setupMatrixSortHeights(),3!=p.mode&&c.trigger({type:"changeQuestion",values:{item:_,index:_.index()}})}}},viewUserQuizStatistics:function(e){var i=jQuery(e).data("ref_id"),t=jQuery(e).data("quiz_id"),o={action:"wp_pro_quiz_admin_ajax",func:"statisticLoadUser",data:{quizId:t,userId:0,refId:i,avg:0}};jQuery("#wpProQuiz_user_overlay, #wpProQuiz_loadUserData").show();var n=jQuery("#wpProQuiz_user_content").hide();jQuery.ajax({type:"POST",url:WpProQuizGlobal.ajaxurl,dataType:"json",cache:!1,data:o,error:function(e,i,t){},success:function(e){void 0!==e.html&&(n.html(e.html),jQuery("#wpProQuiz_user_content").show(),jQuery("#wpProQuiz_loadUserData").hide(),n.find(".statistic_data").click(function(){return jQuery(this).parents("tr").next().toggle("fast"),!1}))}}),jQuery("#wpProQuiz_overlay_close").click(function(){jQuery("#wpProQuiz_user_overlay").hide()})},showSingleQuestion:function(e){var i=e?Math.ceil(e/p.qpp):1;this.showSinglePage(i)},showSinglePage:function(e){if($listItem=I.questionList.children().hide(),p.qpp){e=e?+e:1;var i=Math.ceil(c.find(".wpProQuiz_list > li").length/p.qpp);if(!(e>i)){var t=c.find(b.singlePageLeft).hide(),o=c.find(b.singlePageRight).hide(),n=c.find('input[name="checkSingle"]').hide();e>1&&t.val(t.data("text").replace(/%d/,e-1)).show(),e==i?n.show():o.val(o.data("text").replace(/%d/,e+1)).show(),P=e;var s=p.qpp*(e-1);$listItem.slice(s,s+p.qpp).show(),h.methode.scrollTo(I.quiz)}}else $listItem.show()},nextQuestion:function(){h.methode.CookieProcessQuestionResponse(_),jQuery(".mejs-pause").trigger("click"),this.showQuestionObject(_.next())},prevQuestion:function(){this.showQuestionObject(_.prev())},showQuestion:function(e){var i=I.listItems.eq(e);if(3==p.mode||z)return p.qpp&&h.methode.showSingleQuestion(e+1),h.methode.scrollTo(i,1),void A.startQuiz();this.showQuestionObject(i)},showQuestionObject:function(i){if(!i.length&&k.forcingQuestionSolve&&k.quizSummeryHide&&k.reviewQustion){list=I.questionList.children(),null!=list&&list.each(function(){var i=e(this),t=i.find(b.questionList),o=(t.data("question_id"),p.json[t.data("question_id")]);"sort_answer"==o.type&&c.trigger({type:"questionSolved",values:{item:i,index:i.index(),solved:!0}})});for(var t=0,o=c.find(".wpProQuiz_listItem").length;t<o;t++)if(!v[t])return alert(WpProQuizGlobal.questionsNotSolved),!1}if(_.hide(),_=i.show(),h.methode.scrollTo(I.quiz),c.trigger({type:"changeQuestion",values:{item:_,index:_.index()}}),_.length){var n=_.find(b.questionList).data("question_id");A.questionStart(n)}else h.methode.showQuizSummary()},skipQuestion:function(){c.trigger({type:"skipQuestion",values:{item:_,index:_.index()}}),h.methode.nextQuestion()},reviewQuestion:function(){c.trigger({type:"reviewQuestion",values:{item:_,index:_.index()}})},uploadFile:function(i){var t=i.currentTarget.id.replace("uploadEssaySubmit_",""),o=e("#uploadEssay_"+t)[0].files[0];if(void 0!==o){var n=e("#_uploadEssay_nonce_"+t).val(),s=e("#uploadEssaySubmit_"+t);s.val(p.essayUploading);var r=new FormData;r.append("action","learndash_upload_essay"),r.append("nonce",n),r.append("question_id",t),r.append("course_id",p.course_id),r.append("essayUpload",o),e.ajax({method:"POST",type:"POST",url:WpProQuizGlobal.ajaxurl,data:r,cache:!1,contentType:!1,processData:!1,success:function(i){if(1==i.success&&void 0!==i.data.filelink){e("#uploadEssayFile_"+t).val(i.data.filelink),s.attr("disabled","disabled"),setTimeout(function(){s.val(p.essaySuccess)},1500);var o=e("#uploadEssayFile_"+t).parents(".wpProQuiz_listItem");c.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!0}})}else s.removeAttr("disabled"),s.val("Failed. Try again.")}})}i.preventDefault()},showQuizSummary:function(){if(A.questionStop(),A.stopQuiz(),!k.quizSummeryHide&&k.reviewQustion){var i=c.find(".wpProQuiz_checkPage");i.find("ol:eq(0)").empty().append(c.find(".wpProQuiz_reviewQuestion ol li").clone().removeClass("wpProQuiz_reviewQuestionTarget")).children().click(function(t){i.hide(),I.quiz.show(),j.show(!0),h.methode.showQuestion(e(this).index())});for(var t=0,o=0,n=v.length;o<n;o++)v[o]&&t++;i.find("span:eq(0)").text(t),j.hide(),I.quiz.hide(),i.show(),h.methode.scrollTo(i)}else k.formActivated&&p.formPos==L.END?(j.hide(),I.quiz.hide(),h.methode.scrollTo(c.find(".wpProQuiz_infopage").show())):h.methode.finishQuiz()},finishQuiz:function(e){A.questionStop(),A.stopQuiz(),C.stop();var i=(+new Date-m)/1e3;i=p.timelimit&&i>p.timelimit?p.timelimit:i,g=i,c.find(".wpProQuiz_quiz_time span").text(h.methode.parseTime(i)),e&&I.results.find(".wpProQuiz_time_limit_expired").show(),h.methode.checkQuestion(I.questionList.children(),!0)},finishQuizEnd:function(){c.find(".wpProQuiz_correct_answer").text(f.comp.correctQuestions),f.comp.result=Math.round(f.comp.points/p.globalPoints*100*100)/100;var i=!1;if(e.each(f,function(){void 0!==this.graded_status&&"not_graded"==this.graded_status&&(i=!0)}),"undefined"!=typeof certificate_details&&null!=certificate_details.certificateLink&&""!=certificate_details.certificateLink&&f.comp.result>=100*certificate_details.certificate_threshold){var o=c.find(".wpProQuiz_certificate");1==i&&"undefined"!=typeof certificate_pending&&o.html(certificate_pending),o.show()}var n=c.find(".quiz_continue_link"),s=!1;jQuery(n).hasClass("show_quiz_continue_buttom_on_fail")&&(s=!0),void 0!==t.passingpercentage&&parseFloat(t.passingpercentage)>=0?f.comp.result>=t.passingpercentage||s?"undefined"!=typeof continue_details&&(c.find(".quiz_continue_link").html(continue_details),c.find(".quiz_continue_link").show()):c.find(".quiz_continue_link").hide():"undefined"!=typeof continue_details&&(c.find(".quiz_continue_link").html(continue_details),c.find(".quiz_continue_link").show()),$pointFields=c.find(".wpProQuiz_points span"),$gradedPointsFields=c.find(".wpProQuiz_graded_points span"),$pointFields.eq(0).text(f.comp.points),$pointFields.eq(1).text(p.globalPoints),$pointFields.eq(2).text(f.comp.result+"%"),$gradedQuestionCount=0,$gradedQuestionPoints=0,e.each(f,function(i,t){if(e.isNumeric(i)&&t.graded_id){var o=t.possiblePoints-t.points;o>0&&($gradedQuestionPoints+=o,$gradedQuestionCount++)}}),$gradedQuestionCount>0&&(e(".wpProQuiz_points").hide(),e(".wpProQuiz_graded_points").show(),$gradedPointsFields.eq(0).text(f.comp.points),$gradedPointsFields.eq(1).text(p.globalPoints),$gradedPointsFields.eq(2).text(f.comp.result+"%"),$gradedPointsFields.eq(3).text($gradedQuestionCount),$gradedPointsFields.eq(4).text($gradedQuestionPoints)),c.find(".wpProQuiz_resultsList > li").eq(h.methode.findResultIndex(f.comp.result)).show(),h.methode.setAverageResult(f.comp.result,!1),this.setCategoryOverview(),h.methode.sendCompletedQuiz(),k.isAddAutomatic&&T.isUser&&h.methode.addToplist(),j.hide(),c.find(".wpProQuiz_checkPage, .wpProQuiz_infopage").hide(),I.quiz.hide()},sending:function(e,i,t){I.sending.show();var o,n=I.sending.find(".sending_progress_bar");if(o=null==typeof e||null==e?parseInt(100*n.width()/n.offsetParent().width())+156:e,null==i)i=80;null==t&&(t=1),null!=q&&null!=typeof q&&clearInterval(q),q=setInterval(function(){var e=parseInt(100*n.width()/n.offsetParent().width());e>=i&&(clearInterval(q),e>=100&&setTimeout(h.methode.showResults(),2e3)),n.css("width",o+"%"),o+=t},300)},showResults:function(){I.sending.hide(),I.results.show(),h.methode.scrollTo(I.results)},setCategoryOverview:function(){f.comp.cats={},c.find(".wpProQuiz_catOverview li").each(function(){var i=e(this),t=i.data("category_id");if(void 0===p.catPoints[t])return i.hide(),!0;var o=Math.round(w[t]/p.catPoints[t]*100*100)/100;f.comp.cats[t]=o,i.find(".wpProQuiz_catPercent").text(o+"%"),i.show()})},questionSolved:function(e){v[e.values.index]=e.values.solved},sendCompletedQuiz:function(){if(!k.preview){D(f);var e=R.getFormData();jQuery.ajax({type:"POST",url:WpProQuizGlobal.ajaxurl,dataType:"json",cache:!1,data:{action:"wp_pro_quiz_completed_quiz",course_id:p.course_id,lesson_id:p.lesson_id,topic_id:p.topic_id,quiz:p.quiz,quizId:p.quizId,results:JSON.stringify(f),timespent:g,forms:e,quiz_nonce:p.quiz_nonce},success:function(e){if(null!=e&&void 0!==p.quizId){var i=parseInt(p.quizId);void 0!==e[i]&&void 0!==e[i].quiz_result_settings&&(l=e[i].quiz_result_settings,h.methode.afterSendUpdateIU(l))}h.methode.sending(null,100,15),h.methode.CookieDelete()}})}},afterSendUpdateIU:function(e){void 0!==e.showAverageResult&&(e.showAverageResult||c.find(".wpProQuiz_resultTable").remove()),void 0!==e.showCategoryScore&&(e.showCategoryScore||c.find(".wpProQuiz_catOverview").remove()),void 0!==e.showRestartQuizButton&&(e.showRestartQuizButton||c.find('input[name="restartQuiz"]').remove()),void 0!==e.showResultPoints&&(e.showResultPoints||c.find(".wpProQuiz_points").remove()),void 0!==e.showResultQuizTime&&(e.showResultQuizTime||c.find(".wpProQuiz_quiz_time").remove()),void 0!==e.showViewQuestionButton&&(e.showViewQuestionButton||c.find('input[name="reShowQuestion"]').remove()),void 0!==e.showContinueButton&&(e.showContinueButton||c.find(".quiz_continue_link").remove())},findResultIndex:function(e){for(var i=p.resultsGrade,t=-1,o=999999,n=0;n<i.length;n++){var s=i[n];e>=s&&e-s<o&&(o=e-s,t=n)}return t},showQustionList:function(){z=!z,I.toplistShowInButton.hide(),I.quiz.toggle(),c.find(".wpProQuiz_QuestionButton").hide(),I.questionList.children().show(),j.toggle(),c.find(".wpProQuiz_question_page").hide()},random:function(i){i.each(function(){var i=e(this).children().get().sort(function(){return Math.round(Math.random())-.5});e(i).appendTo(i[0].parentNode)})},sortCategories:function(){var i=e(".wpProQuiz_list").children().get().sort(function(i,t){var o=e(i).find(".wpProQuiz_questionList").data("question_id"),n=e(t).find(".wpProQuiz_questionList").data("question_id");return p.json[o].catId-p.json[n].catId});e(i).appendTo(i[0].parentNode)},restartQuiz:function(){I.results.hide(),I.questionList.children().hide(),I.toplistShowInButton.hide(),j.hide(),c.find(".wpProQuiz_questionInput, .wpProQuiz_cloze input").removeAttr("disabled").removeAttr("checked").css("background-color",""),c.find('.wpProQuiz_questionListItem input[type="text"]').val(""),c.find(".wpProQuiz_answerCorrect, .wpProQuiz_answerIncorrect").removeClass("wpProQuiz_answerCorrect wpProQuiz_answerIncorrect"),c.find(".wpProQuiz_listItem").data("check",!1),c.find("textarea.wpProQuiz_questionEssay").val(""),c.find("input.uploadEssayFile").val(""),c.find("input.wpProQuiz_upload_essay").val(""),c.find(".wpProQuiz_response").hide().children().hide(),h.methode.resetMatrix(c.find(".wpProQuiz_listItem")),c.find(".wpProQuiz_sortStringItem, .wpProQuiz_sortable").removeAttr("style"),c.find(".wpProQuiz_clozeCorrect, .wpProQuiz_QuestionButton, .wpProQuiz_resultsList > li").hide(),c.find('.wpProQuiz_question_page, input[name="tip"]').show(),c.find(".wpProQuiz_certificate").attr("style","display: none !important"),I.results.find(".wpProQuiz_time_limit_expired").hide(),I.next.last().val(Q),z=!1,window.location.reload(!0)},showSpinner:function(){c.find(".wpProQuiz_spinner").show()},hideSpinner:function(){c.find(".wpProQuiz_spinner").hide()},checkQuestion:function(i,t){var o=null!=i,n={};i=null==i?_:i,i.each(function(){var i=e(this),t=i.index(),o=i.find(b.questionList),s=o.data("question_id"),r=p.json[o.data("question_id")],a=r.type;if(A.questionStop(),i.data("check"))return!0;"single"!=r.type&&"multiple"!=r.type||(a="singleMulti"),n[s]=E(a,r,i,o,!0),n[s].question_pro_id=r.id,n[s].question_post_id=r.question_post_id,h.methode.CookieSaveResponse(s,t,r.type,n[s])}),p.checkAnswers={list:i,responses:n,endCheck:t,finishQuiz:o},o?h.methode.sending(1,80,3):h.methode.showSpinner(),h.methode.ajax({action:"ld_adv_quiz_pro_ajax",func:"checkAnswers",data:{quizId:p.quizId,quiz:p.quiz,course_id:p.course_id,quiz_nonce:p.quiz_nonce,responses:JSON.stringify(n)}},function(i){h.methode.hideSpinner();var t=p.checkAnswers.list,o=(p.checkAnswers.responses,p.checkAnswers.r,p.checkAnswers.endCheck),n=p.checkAnswers.finishQuiz;t.each(function(){var t=e(this),n=t.find(b.questionList),s=n.data("question_id");if(t.data("check"))return!0;if(void 0!==i[s]){var r=i[s];data=p.json[n.data("question_id")],t.find(".wpProQuiz_response").show(),t.find(b.check).hide(),t.find(b.skip).hide(),t.find(b.next).show(),f[data.id].points=r.p,void 0!==r.p_nonce?f[data.id].p_nonce=r.p_nonce:f[data.id].p_nonce="",f[data.id].correct=Number(r.c),f[data.id].data=r.s,void 0!==r.a_nonce?f[data.id].a_nonce=r.a_nonce:f[data.id].a_nonce="",f[data.id].possiblePoints=r.e.possiblePoints,jQuery.isEmptyObject(f[data.id].data)&&(null==r.e.type||"sort_answer"!=r.e.type&&"matrix_sort_answer"!=r.e.type||(f[data.id].data=r.e.r)),void 0!==r.e.graded_id&&r.e.graded_id>0&&(f[data.id].graded_id=r.e.graded_id),void 0!==r.e.graded_status&&(f[data.id].graded_status=r.e.graded_status),f.comp.points+=r.p,t.find(".wpProQuiz_response").show(),t.find(b.check).hide(),t.find(b.skip).hide(),t.find(b.next).show(),jQuery.isEmptyObject(f[data.id].data)&&void 0!==r.e.type&&("sort_answer"!=r.e.type&&"matrix_sort_answer"!=r.e.type||void 0!==r.e.r&&(f[data.id].data=r.e.r),"essay"==r.e.type&&void 0!==r.e.graded_id&&(f[data.id].data={graded_id:r.e.graded_id})),w[data.catId]+=r.p,h.methode.markCorrectIncorrect(r,t,n),r.c?(void 0!==r.e.AnswerMessage&&(t.find(".wpProQuiz_correct").find(".wpProQuiz_AnswerMessage").html(r.e.AnswerMessage),t.find(".wpProQuiz_correct").trigger("learndash-quiz-answer-response-contentchanged")),t.find(".wpProQuiz_correct").show(),f.comp.correctQuestions+=1):(void 0!==r.e.AnswerMessage&&(t.find(".wpProQuiz_incorrect").find(".wpProQuiz_AnswerMessage").html(r.e.AnswerMessage),t.find(".wpProQuiz_incorrect").trigger("learndash-quiz-answer-response-contentchanged")),t.find(".wpProQuiz_incorrect").show()),t.find(".wpProQuiz_responsePoints").text(r.p),t.data("check",!0),o||c.trigger({type:"questionSolved",values:{item:t,index:t.index(),solved:!0}})}}),n&&h.methode.finishQuizEnd()})},markCorrectIncorrect:function(i,t,o){if(void 0!==i.e.c)switch(i.e.type){case"single":case"multiple":o.children().each(function(t){var o=e(this),n=o.attr("data-pos");if(i.e.c[n]){var s=e("input.wpProQuiz_questionInput",o).is(":checked");s?h.methode.marker(o,!0):h.methode.marker(o,"wpProQuiz_answerCorrectIncomplete")}else!i.c&&i.e.r[n]&&h.methode.marker(o,!1)});break;case"free_answer":var n=o.children();i.c?h.methode.marker(n,!0):h.methode.marker(n,!1);break;case"cloze_answer":o.find(".wpProQuiz_cloze").each(function(t,o){var n=e(this),s=n.children(),r=s.eq(0),a=s.eq(1);h.methode.cleanupCurlyQuotes(r.val());i.s[t]?r.addClass("wpProQuiz_answerCorrect"):(r.addClass("wpProQuiz_answerIncorrect"),void 0!==i.e.c[t]&&(a.html("("+i.e.c[t].join()+")"),a.show())),r.attr("disabled","disabled")});break;case"sort_answer":var s=o.children();s.each(function(t,o){var n=e(this);i.e.c[t]==n.attr("data-pos")?h.methode.marker(n,!0):h.methode.marker(n,!1)}),s.children().css({"box-shadow":"0 0",cursor:"auto"});var r=new Array;jQuery.each(i.e.c,function(e,i){r[i]=e}),s.sort(function(i,t){return r[e(i).attr("data-pos")]>r[e(t).attr("data-pos")]?1:-1}),o.append(s);break;case"matrix_sort_answer":s=o.children();var a=new Array;statistcAnswerData={0:-1},s.each(function(){var t=e(this),o=(t.attr("data-pos"),t.find(".wpProQuiz_maxtrixSortCriterion")),n=o.children(),s=n.attr("data-pos");n.length&&i.e.c[s]==t.attr("data-pos")?h.methode.marker(t,!0):h.methode.marker(t,!1),a[s]=o}),h.methode.resetMatrix(t),t.find(".wpProQuiz_sortStringItem").each(function(){var i=a[e(this).attr("data-pos")];null!=i&&i.append(this)}).css({"box-shadow":"0 0",cursor:"auto"})}},showTip:function(){var i=e(this),t=i.siblings(".wpProQuiz_question").find(b.questionList).data("question_id");i.siblings(".wpProQuiz_tipp").toggle("fast"),f[t].tip=1,e(document).bind("mouseup.tipEvent",function(i){var t=c.find(".wpProQuiz_tipp"),o=c.find('input[name="tip"]');t.is(i.target)||0!=t.has(i.target).length||o.is(i.target)||(t.hide("fast"),e(document).unbind(".tipEvent"))})},ajax:function(i,t,o){o=o||"json",k.cors&&(jQuery.support.cors=!0),void 0===i.quiz&&(i.quiz=p.quiz),void 0===i.course_id&&(i.course_id=p.course_id),void 0===i.quiz_nonce&&(i.quiz_nonce=p.quiz_nonce),e.ajax({method:"POST",type:"POST",url:WpProQuizGlobal.ajaxurl,data:i,success:t,dataType:o}),k.cors&&(jQuery.support.cors=!1)},checkQuizLock:function(){S.loadLock=1,h.methode.ajax({action:"wp_pro_quiz_check_lock",quizId:p.quizId},function(e){null!=e.lock&&(S.isLocked=e.lock.is,e.lock.pre&&c.find('input[name="restartQuiz"]').hide()),null!=e.prerequisite&&(S.isPrerequisite=1,c.find(".wpProQuiz_prerequisite span").text(e.prerequisite)),null!=e.startUserLock&&(S.isUserStartLocked=e.startUserLock),S.loadLock=0,S.isQuizStart&&h.methode.startQuiz()})},loadQuizData:function(){h.methode.ajax({action:"wp_pro_quiz_load_quiz_data",quizId:p.quizId},function(e){e.toplist&&h.methode.handleToplistData(e.toplist),null!=e.averageResult&&h.methode.setAverageResult(e.averageResult,!0)})},setAverageResult:function(e,i){var t=c.find(".wpProQuiz_resultValue:eq("+(i?0:1)+") > * ");t.eq(1).text(e+"%"),t.eq(0).css("width",240*e/100+"px")},handleToplistData:function(e){var i=c.find(".wpProQuiz_addToplist"),t=i.find(".wpProQuiz_addBox").show().children("div");if(e.canAdd)if(i.show(),i.find(".wpProQuiz_addToplistMessage").hide(),i.find(".wpProQuiz_toplistButton").show(),T.token=e.token,T.isUser=0,e.userId)t.hide(),T.isUser=1,
k.isAddAutomatic&&i.hide();else{t.show();var o=t.children().eq(1);e.captcha?(o.find('input[name="wpProQuiz_captchaPrefix"]').val(e.captcha.code),o.find(".wpProQuiz_captchaImg").attr("src",e.captcha.img),o.find('input[name="wpProQuiz_captcha"]').val(""),o.show()):o.hide()}else i.hide()},scrollTo:function(i,t){var o=i.offset().top-100;(t||(window.pageYOffset||document.body.scrollTop)>o)&&e("html,body").animate({scrollTop:o},300)},addToplist:function(){if(!k.preview){var e=c.find(".wpProQuiz_addToplistMessage").text(WpProQuizGlobal.loadData).show(),i=c.find(".wpProQuiz_addBox").hide();h.methode.ajax({action:"wp_pro_quiz_add_toplist",quizId:p.quizId,quiz:p.quiz,token:T.token,name:i.find('input[name="wpProQuiz_toplistName"]').val(),email:i.find('input[name="wpProQuiz_toplistEmail"]').val(),captcha:i.find('input[name="wpProQuiz_captcha"]').val(),prefix:i.find('input[name="wpProQuiz_captchaPrefix"]').val(),results:f,timespent:g},function(t){e.text(t.text),t.clear?(i.hide(),h.methode.updateToplist()):i.show(),t.captcha&&(i.find(".wpProQuiz_captchaImg").attr("src",t.captcha.img),i.find('input[name="wpProQuiz_captchaPrefix"]').val(t.captcha.code),i.find('input[name="wpProQuiz_captcha"]').val(""))})}},updateToplist:function(){"function"==typeof wpProQuiz_fetchToplist&&wpProQuiz_fetchToplist()},registerSolved:function(){c.find('.wpProQuiz_questionInput[type="text"]').change(function(i){var t=e(this),o=t.parents(".wpProQuiz_listItem"),n=!1;""!=t.val()&&(n=!0),c.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:n}})}),c.find('.wpProQuiz_questionList[data-type="single"] .wpProQuiz_questionInput, .wpProQuiz_questionList[data-type="assessment_answer"] .wpProQuiz_questionInput').change(function(i){var t=e(this),o=t.parents(".wpProQuiz_listItem"),n=this.checked;c.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:n}})}),c.find(".wpProQuiz_cloze input").change(function(){var i=e(this),t=i.parents(".wpProQuiz_listItem"),o=!0;t.find(".wpProQuiz_cloze input").each(function(){if(""==e(this).val())return o=!1,!1}),c.trigger({type:"questionSolved",values:{item:t,index:t.index(),solved:o}})}),c.find('.wpProQuiz_questionList[data-type="multiple"] .wpProQuiz_questionInput').change(function(i){var t=e(this),o=t.parents(".wpProQuiz_listItem"),n=0;o.find('.wpProQuiz_questionList[data-type="multiple"] .wpProQuiz_questionInput').each(function(e){this.checked&&n++}),c.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:!!n}})}),c.find('.wpProQuiz_questionList[data-type="essay"] textarea.wpProQuiz_questionEssay').change(function(i){var t=e(this),o=t.parents(".wpProQuiz_listItem"),n=!1;""!=t.val()&&(n=!0),c.trigger({type:"questionSolved",values:{item:o,index:o.index(),solved:n}})})},loadQuizDataAjax:function(i){h.methode.ajax({action:"wp_pro_quiz_admin_ajax",func:"quizLoadData",data:{quizId:p.quizId,quiz:p.quiz,quiz_nonce:p.quiz_nonce}},function(t){p.globalPoints=t.globalPoints,p.catPoints=t.catPoints,p.json=t.json,I.quiz.remove(),c.find(".wpProQuiz_quizAnker").after(t.content),e("table.wpProQuiz_toplistTable caption span.wpProQuiz_max_points").html(p.globalPoints),I={back:c.find('input[name="back"]'),next:c.find(b.next),quiz:c.find(".wpProQuiz_quiz"),questionList:c.find(".wpProQuiz_list"),results:c.find(".wpProQuiz_results"),sending:c.find(".wpProQuiz_sending"),quizStartPage:c.find(".wpProQuiz_text"),timelimit:c.find(".wpProQuiz_time_limit"),toplistShowInButton:c.find(".wpProQuiz_toplistShowInButton"),listItems:e()},h.methode.initQuiz(),i&&h.methode.startQuiz(!0);var o=t.content,n=o.search("wp-audio-shortcode"),s=o.search("wp-video-shortcode");"-1"==n&&"-1"==s||(e.getScript(t.site_url+"/wp-includes/js/mediaelement/mediaelement-and-player.min.js"),e.getScript(t.site_url+"/wp-includes/js/mediaelement/wp-mediaelement.js"),e("<link/>",{rel:"stylesheet",type:"text/css",href:t.site_url+"/wp-includes/js/mediaelement/mediaelementplayer.min.css"}).appendTo("head"))})},nextQuestionClicked:function(){var e=_.find(b.questionList),i=p.json[e.data("question_id")];if("sort_answer"==i.type){var t=_.index();void 0===v[t]&&c.trigger({type:"questionSolved",values:{item:_,index:t,solved:!0}})}if(k.forcingQuestionSolve&&!v[_.index()]&&(k.quizSummeryHide||!k.reviewQustion))return alert(WpProQuizGlobal.questionNotSolved),!1;h.methode.nextQuestion()},initQuiz:function(){h.methode.setClozeStyle(),h.methode.registerSolved(),I.next.click(h.methode.nextQuestionClicked),I.back.click(function(){h.methode.prevQuestion()}),c.find(b.check).click(function(){if(k.forcingQuestionSolve&&!v[_.index()]&&(k.quizSummeryHide||!k.reviewQustion))return alert(WpProQuizGlobal.questionNotSolved),!1;h.methode.checkQuestion()}),c.find('input[name="checkSingle"]').click(function(){if(list=I.questionList.children(),null!=list&&list.each(function(){var i=e(this),t=i.find(b.questionList),o=(t.data("question_id"),p.json[t.data("question_id")]);"sort_answer"==o.type&&c.trigger({type:"questionSolved",values:{item:i,index:i.index(),solved:!0}})}),k.forcingQuestionSolve&&(k.quizSummeryHide||!k.reviewQustion))for(var i=0,t=c.find(".wpProQuiz_listItem").length;i<t;i++)if(!v[i])return alert(WpProQuizGlobal.questionsNotSolved),!1;h.methode.showQuizSummary()}),c.find('input[name="tip"]').click(h.methode.showTip),c.find('input[name="skip"]').click(h.methode.skipQuestion),c.find('input[name="wpProQuiz_pageLeft"]').click(function(){h.methode.showSinglePage(P-1),h.methode.setupMatrixSortHeights()}),c.find('input[name="wpProQuiz_pageRight"]').click(function(){h.methode.showSinglePage(P+1),h.methode.setupMatrixSortHeights()}),c.find('input[id^="uploadEssaySubmit"]').click(h.methode.uploadFile),c.trigger("learndash-quiz-init")},CookieInit:function(){0!=p.timelimitcookie&&(y="ld_"+p.quizId+"_quiz_responses",x=jQuery.cookie(y),x=""==x||null==x?{}:JSON.parse(x),h.methode.CookieSetResponses(),h.methode.CookieResponseTimer())},CookieDelete:function(){0!=p.timelimitcookie&&(y="ld_"+p.quizId+"_quiz_responses",jQuery.cookie(y,""))},CookieProcessQuestionResponse:function(i){null!=i&&i.each(function(){var i=e(this),t=i.index(),o=i.find(b.questionList),n=o.data("question_id"),s=p.json[o.data("question_id")],r=s.type;"single"!=s.type&&"multiple"!=s.type||(r="singleMulti");var a=E(r,s,i,o,!1);h.methode.CookieSaveResponse(n,t,s.type,a)})},CookieSaveResponse:function(e,i,t,o){if(0!=p.timelimitcookie){x[e]={index:i,value:o.response,type:t};var n=new Date;n.setTime(n.getTime()+1e3*p.timelimitcookie),jQuery.cookie(y,JSON.stringify(x),{expires:n})}},CookieResponseTimer:function(){0!=p.timelimitcookie&&c.bind("questionSolved",function(e){h.methode.CookieProcessQuestionResponse(e.values.item)})},CookieSetResponses:function(){if(0!=p.timelimitcookie&&null!=x&&Object.keys(x).length){var i=I.questionList.children();i.each(function(){var i=e(this),t=i.find(b.questionList),o=t.data("question_id");if(null!=x[o]){var s=x[o],r=p.json[t.data("question_id")];r.type===s.type&&n(r,s.value,i,t)}})}},setupMatrixSortHeights:function(){e("li.wpProQuiz_listItem",I.questionList).each(function(i,t){var o=e(t).data("type");if("matrix_sort_answer"===o){var n=0;e("ul.wpProQuiz_sortStringList li",t).each(function(i,t){var o=e(t).outerHeight();o>n&&(n=o)}),n>0&&e("ul.wpProQuiz_sortStringList",t).css("min-height",n),e("ul.wpProQuiz_maxtrixSortCriterion",t).each(function(i,t){var o=e(t).parent("td");if(void 0!==o){var n=e(o).height();e(t).css("height",n),e(t).css("min-height",n)}})}})}},h.preInit=function(){h.methode.parseBitOptions(),j.init(),c.find('input[name="startQuiz"]').click(function(){return h.methode.startQuiz(),!1}),c.find('input[name="viewUserQuizStatistics"]').click(function(){return h.methode.viewUserQuizStatistics(this),!1}),k.checkBeforeStart&&!k.preview&&h.methode.checkQuizLock(),c.find('input[name="reShowQuestion"]').click(function(){h.methode.showQustionList()}),c.find('input[name="restartQuiz"]').click(function(){h.methode.restartQuiz()}),c.find('input[name="review"]').click(h.methode.reviewQuestion),c.find('input[name="wpProQuiz_toplistAdd"]').click(h.methode.addToplist),c.find('input[name="quizSummary"]').click(h.methode.showQuizSummary),c.find('input[name="endQuizSummary"]').click(function(){if(k.forcingQuestionSolve){list=I.questionList.children(),null!=list&&list.each(function(){var i=e(this),t=i.find(b.questionList),o=(t.data("question_id"),p.json[t.data("question_id")]);if("sort_answer"==o.type){var n=i.index();void 0===v[n]&&c.trigger({type:"questionSolved",values:{item:i,index:n,solved:!0}})}});for(var i=0,t=c.find(".wpProQuiz_listItem").length;i<t;i++)if(!v[i])return alert(WpProQuizGlobal.questionsNotSolved),!1}k.formActivated&&p.formPos==L.END&&!R.checkForm()||h.methode.finishQuiz()}),c.find('input[name="endInfopage"]').click(function(){R.checkForm()&&h.methode.finishQuiz()}),c.find('input[name="showToplist"]').click(function(){I.quiz.hide(),I.toplistShowInButton.toggle()}),c.bind("questionSolved",h.methode.questionSolved),k.maxShowQuestion||h.methode.initQuiz(),k.autoStart&&h.methode.startQuiz()},h.preInit()},e.fn.wpProQuizFront=function(i){return this.each(function(){null==e(this).data("wpProQuizFront")&&e(this).data("wpProQuizFront",new e.wpProQuizFront(this,i))})}})(jQuery);